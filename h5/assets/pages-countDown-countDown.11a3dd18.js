import{k as e,D as a,a9 as t,a1 as s,a2 as l,d as o,l as n,o as u,c as i,w as r,G as c,x as m,e as d,F as f,b as p,t as v,n as _,L as h,i as S,_ as D,m as k,E as w,a as H,C as g}from"./index-f30f5313.js";import{a6 as C,C as j,W as b,m as x,s as M,t as y,i as z,j as F,v as P,r as I,_ as L}from"./DemoPage.cf3c40e0.js";import{_ as A,a as B}from"./z-grid.18231d09.js";import{u as E}from"./z-toast.1a41a7b4.js";import"./z-dialog.a22a98be.js";import"./useParent.17bb91a9.js";import"./useChildren.47d4431b.js";const G=1e3,T=60*G,W=60*T,Z=24*W;function $(o){let n,u,i,r;const c=e(o.time),m=a((()=>{return{total:e=c.value,days:Math.floor(e/Z),hours:Math.floor(e%Z/W),minutes:Math.floor(e%W/T),seconds:Math.floor(e%T/G),milliseconds:Math.floor(e%G)};var e})),d=()=>{i=!1,C(n)},f=()=>Math.max(u-Date.now(),0),p=e=>{var a,t;c.value=e,null==(a=o.onChange)||a.call(o,m.value),0===e&&(d(),null==(t=o.onFinish)||t.call(o))},v=()=>{n=j((()=>{i&&(p(f()),c.value>0&&v())}))},_=()=>{n=j((()=>{if(i){const t=f();e=t,a=c.value,(Math.floor(e/1e3)!==Math.floor(a/1e3)||0===t)&&p(t),c.value>0&&_()}var e,a}))},h=()=>{o.millisecond?v():_()};return t(d),s((()=>{r&&(i=!0,r=!1,h())})),l((()=>{i&&(d(),r=!0)})),{start:()=>{i||(u=Date.now()+c.value,i=!0,h())},pause:d,reset:(e=o.time)=>{d(),c.value=e},current:m}}const q=D(o({name:"ZCountDown",options:{virtualHost:!0},props:{time:x(0),format:M("HH:mm:ss"),autoStart:y,millisecond:Boolean},emits:["change","finish"],setup(e,{expose:t,emit:s}){const[l,o]=z("count-down");F(l);const D=e,k=h(),w=s,{start:H,pause:g,reset:C,current:j}=$({time:+D.time,millisecond:D.millisecond,onChange:e=>w("change",e),onFinish:()=>w("finish")}),x=a((()=>function(e,a){const{days:t}=a;let{hours:s,minutes:l,seconds:o,milliseconds:n}=a;if(e.includes("DD")?e=e.replace("DD",b(t)):s+=24*t,e.includes("HH")?e=e.replace("HH",b(s)):l+=60*s,e.includes("mm")?e=e.replace("mm",b(l)):o+=60*l,e.includes("ss")?e=e.replace("ss",b(o)):n+=1e3*o,e.includes("S")){const a=b(n,3);e=e.includes("SSS")?e.replace("SSS",a):e.includes("SS")?e.replace("SS",a.slice(0,2)):e.replace("S",a.charAt(0))}return e}(D.format,j.value))),M=()=>{C(+D.time),D.autoStart&&H()};return n((()=>D.time),M,{immediate:!0}),P({start:H,pause:g,reset:M}),t({start:H,pause:g,reset:M}),(e,a)=>{const t=S;return u(),i(t,{class:_(c(o)())},{default:r((()=>[c(k).slots.default?m(e.$slots,"default",{key:0,current:c(j)},void 0,!0):(u(),d(f,{key:1},[p(v(x.value),1)],64))])),_:3},8,["class"])}}}),[["__scopeId","data-v-a78824ba"]]),J=D(o({__name:"countDown",setup(a){const t=E(),s=e(108e6),l=e(),o=()=>{var e;null==(e=l.value)||e.start()},n=()=>{var e;null==(e=l.value)||e.pause()},c=()=>{var e;null==(e=l.value)||e.reset()},m=()=>t.showToast("倒计时结束");return(e,a)=>{const t=I(k("z-count-down"),q),d=w("demo-block"),f=g,_=S,h=I(k("z-grid-item"),A),D=I(k("z-grid"),B),C=I(k("DemoPage"),L);return u(),i(C,{title:"CountDown"},{default:r((()=>[H(_,{class:"demo-count-down"},{default:r((()=>[H(d,{title:"基础用法"},{default:r((()=>[H(t,{time:s.value},null,8,["time"])])),_:1}),H(d,{title:"自定义格式"},{default:r((()=>[H(t,{time:s.value,format:"DD 天 HH 时 mm 分 ss 秒"},null,8,["time"])])),_:1}),H(d,{title:"毫秒级渲染"},{default:r((()=>[H(t,{millisecond:"",time:s.value,format:"HH:mm:ss:SS"},null,8,["time"])])),_:1}),H(d,{title:"自定义样式"},{default:r((()=>[H(t,{time:s.value},{default:r((({current:e})=>[H(f,{class:"block"},{default:r((()=>[p(v(e.hours),1)])),_:2},1024),H(f,{class:"colon"},{default:r((()=>[p(":")])),_:1}),H(f,{class:"block"},{default:r((()=>[p(v(e.minutes),1)])),_:2},1024),H(f,{class:"colon"},{default:r((()=>[p(":")])),_:1}),H(f,{class:"block"},{default:r((()=>[p(v(e.seconds),1)])),_:2},1024)])),_:1},8,["time"])])),_:1}),H(d,{title:"手动控制"},{default:r((()=>[H(_,{class:"count-content"},{default:r((()=>[H(t,{ref_key:"countDown",ref:l,millisecond:"",time:3e3,"auto-start":!1,format:"ss:SSS",onFinish:m},null,512)])),_:1}),H(D,{clickable:"","column-num":3},{default:r((()=>[H(h,{icon:"play-circle",text:"开始",onClick:o}),H(h,{icon:"timeout",text:"暂停",onClick:n}),H(h,{icon:"reload",text:"重置",onClick:c})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-82eeb50a"]]);export{J as default};
