import{d as a,k as e,D as t,l as s,ad as l,o,c as r,w as i,a as u,n as p,G as c,y as d,p as m,ao as g,P as n,i as f,N as h,O as w,L as _,_ as v,m as y,E as k,b}from"./index-f30f5313.js";import{w as z,m as x,n as j,t as I,s as P,i as S,j as q,k as C,A as D,y as F,r as W,a as X,_ as Y}from"./DemoPage.cf3c40e0.js";import{u as A}from"./use-id.cdfa0884.js";const G=v(a({name:"ZWatermark",options:{virtualHost:!0},props:{gapX:z(0),gapY:z(0),image:String,width:z(100),height:z(100),rotate:x(-22),zIndex:j,content:String,opacity:z(1),fullPage:I,textColor:P("#dcdee0"),type:P(""),fontSize:z(20)},setup(a){const[v,y]=S("watermark");q(v);const k=_(),b=A(),z=a,x=e(""),j=e(""),I=e(!0),P=t((()=>C({backgroundImage:`url(${x.value})`},D(z.zIndex)))),W=(a="")=>{I.value=!0;const e=h(b,k);e.translate(0,0),e.setGlobalAlpha(z.opacity),e.rotate(Number(z.rotate)*Math.PI/180),e.setFillStyle(z.textColor),e.setFontSize(z.fontSize),a&&e.drawImage(a,0,0,z.height/1.5,z.width/1.5),z.content&&e.fillText(z.content,0,z.height/2),e.draw(!1,(()=>{w({canvasId:b,destWidth:X.value,destHeight:Y.value,success:a=>{x.value=a.tempFilePath,I.value=!1},fail:a=>{console.warn(a)}})}))},X=t((()=>z.width+z.gapX)),Y=t((()=>z.height+z.gapY));return s((()=>[j.value,z.content,z.textColor,z.height,z.width,z.rotate,z.gapX,z.gapY,z.image]),(()=>{l((()=>{x.value&&(x.value=""),z.image?g({src:z.image,success:a=>{W(a.path)}}):W()}))}),{immediate:!0}),(a,e)=>{const t=n,s=f;return o(),r(s,{class:p(["z-watermark-rect",c(y)({full:z.fullPage})]),style:d(P.value)},{default:i((()=>[u(s,{class:p(c(y)("wrapper"))},{default:i((()=>[I.value?(o(),r(t,{key:0,id:c(b),"canvas-id":c(b),style:d({width:c(F)(X.value),height:c(F)(Y.value)})},null,8,["id","canvas-id","style"])):m("",!0)])),_:1},8,["class"])])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-d4427cf2"]]),H=v(a({__name:"watermark",setup(a){const t=e(!1);return(a,e)=>{const s=W(y("z-watermark"),G),l=f,p=k("demo-block"),c=W(y("z-button"),X),d=W(y("DemoPage"),Y);return o(),r(d,{title:"Watermark"},{default:i((()=>[u(l,{class:"demo-watermark"},{default:i((()=>[u(p,{title:"基础用法"},{default:i((()=>[u(l,{class:"demo-watermark-wrapper"},{default:i((()=>[u(s,{content:"Zebra","full-page":!1})])),_:1})])),_:1}),u(p,{title:"图片水印"},{default:i((()=>[u(l,{class:"demo-watermark-wrapper"},{default:i((()=>[u(s,{rotate:0,image:"https://assets-1256020106.cos.ap-beijing.myqcloud.com/zebra-ui/images/logo.png",opacity:.2,"full-page":!1})])),_:1})])),_:1}),u(p,{title:"自定义间隔"},{default:i((()=>[u(l,{class:"demo-watermark-wrapper"},{default:i((()=>[u(s,{rotate:0,image:"https://assets-1256020106.cos.ap-beijing.myqcloud.com/zebra-ui/images/logo.png","gap-x":30,"gap-y":10,opacity:.2,"full-page":!1})])),_:1})])),_:1}),u(p,{title:"自定义倾斜角度"},{default:i((()=>[u(l,{class:"demo-watermark-wrapper"},{default:i((()=>[u(s,{image:"https://assets-1256020106.cos.ap-beijing.myqcloud.com/zebra-ui/images/logo.png",rotate:22,opacity:.2,"full-page":!1})])),_:1})])),_:1}),u(p,{title:"显示范围"},{default:i((()=>[u(l,{class:"demo-watermark-wrapper"},{default:i((()=>[u(c,{type:"primary",onClick:e[0]||(e[0]=a=>t.value=!t.value)},{default:i((()=>[b(" 切换 ")])),_:1}),u(s,{rotate:0,"full-page":t.value,opacity:.2,image:"https://assets-1256020106.cos.ap-beijing.myqcloud.com/zebra-ui/images/logo.png"},null,8,["full-page"])])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-0ef5df51"]]);export{H as default};
