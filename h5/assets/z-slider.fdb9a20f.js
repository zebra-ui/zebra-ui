import{d as e,k as t,D as a,o as s,c as l,w as o,a as r,n,G as u,y as i,e as c,F as d,z as m,x as v,L as g,i as b,_ as h}from"./index-f30f5313.js";import{m as p,n as y,i as f,j as V,y as k,X as T,p as x,x as S,Y as _,G as z}from"./DemoPage.cf3c40e0.js";import{u as N}from"./index.3b818c1b.js";import{u as w}from"./use-touch.6469fcb8.js";const j=h(e({name:"ZSlider",options:{virtualHost:!0},props:{min:p(0),max:p(100),step:p(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:y,buttonSize:y,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0},customStyle:Object},emits:["change","dragEnd","dragStart","update:modelValue"],setup(e,{emit:h}){const[p,y]=f("slider");V(p);const j=g(),C=e,B=h;let P,X,Y;const A=t(),H=w(),I=a((()=>Number(C.max)-Number(C.min))),$=a((()=>{const e=C.vertical?"width":"height";return{background:C.inactiveColor,[e]:k(C.barHeight),...C.customStyle}})),D=a((()=>"dragging"===A.value)),E=e=>C.range&&Array.isArray(e),G=()=>{const{modelValue:e,min:t}=C;return E(e)?100*(e[1]-e[0])/I.value+"%":100*(e-Number(t))/I.value+"%"},F=a((()=>{const e={[C.vertical?"height":"width"]:G(),background:C.activeColor};A.value&&(e.transition="none");return e[C.vertical?C.reverse?"bottom":"top":C.reverse?"right":"left"]=(()=>{const{modelValue:e,min:t}=C;return E(e)?100*(e[0]-Number(t))/I.value+"%":"0%"})(),e})),L=e=>{const t=+C.min,a=+C.max,s=+C.step;e=z(e,t,a);const l=Math.round((e-t)/s)*s;return _(t,l)},M=()=>{const e=C.modelValue;Y=E(e)?e.map(L):L(e)},O=(e,t)=>{e=E(e)?(e=>{const t=e[0]?e[0]:Number(C.min),a=e[1]?e[1]:Number(C.max);return t>a?[a,t]:[t,a]})(e).map(L):L(e),x(e,C.modelValue)||B("update:modelValue",e),t&&!x(e,Y)&&B("change",e)},Z=e=>{if(C.disabled||C.readonly)return;M();const t=e.touches[0],{min:a,reverse:s,vertical:l,modelValue:o}=C;S(j,".z-slider-rect").then((e=>{const r=l?e.height:e.width,n=Number(a)+(l?s?e.bottom-t.clientY:t.clientY-e.top:s?e.right-t.clientX:t.clientX-e.left)/r*I.value;if(E(o)){const[e,t]=o;O(n<=(e+t)/2?[n,t]:[e,n],!0)}else O(n,!0)}))},q=(e,t="")=>{"number"==typeof t&&(P=t),J(e)},J=e=>{C.disabled||C.readonly||(H.start(e),X=C.modelValue,M(),A.value="start")},K=e=>{C.disabled||C.readonly||("start"===A.value&&B("dragStart",e),H.move(e),A.value="dragging",S(j,".z-slider-rect").then((e=>{let t=(C.vertical?H.deltaY.value:H.deltaX.value)/(C.vertical?e.height:e.width)*I.value;if(C.reverse&&(t=-t),E(Y)){const e=C.reverse?1-P:P;X[e]=Y[e]+t}else X=Y+t;O(X)})))},Q=e=>{C.disabled||C.readonly||("dragging"===A.value&&(O(X,!0),B("dragEnd",e)),A.value="")},R=e=>{if("number"==typeof e){return y("button-wrapper",["left","right"][e])}return y("button-wrapper",C.reverse?"left":"right")};return O(C.modelValue),N((()=>C.modelValue)),(e,t)=>{const a=b;return s(),l(a,{style:i($.value),class:n(["z-slider-rect",u(y)({vertical:C.vertical,disabled:C.disabled})]),onClick:m(Z,["stop"])},{default:o((()=>[r(a,{class:n(u(y)("bar")),style:i(F.value)},{default:o((()=>[C.range?(s(),c(d,{key:0},[r(a,{class:n(R(0)),onTouchstartPassive:t[0]||(t[0]=e=>q(e,0)),onTouchmove:m(K,["stop","prevent"]),onTouchend:Q,onTouchcancel:Q,onClick:t[1]||(t[1]=m((()=>{}),["stop"]))},{default:o((()=>[u(j).slots["left-button"]?v(e.$slots,"left-button",{key:0,value:C.modelValue[0],dragging:D.value,dragIndex:u(X)[0]>u(X)[1]?1^u(P):u(P)},void 0,!0):(s(),l(a,{key:1,class:n(u(y)("button")),style:i(u(T)(C.buttonSize))},null,8,["class","style"]))])),_:3},8,["class"]),r(a,{class:n(R(1)),onTouchstartPassive:t[2]||(t[2]=e=>q(e,1)),onTouchmove:m(K,["stop","prevent"]),onTouchend:Q,onTouchcancel:Q},{default:o((()=>[u(j).slots["right-button"]?v(e.$slots,"right-button",{key:0,value:C.modelValue[1],dragging:D.value,dragIndex:u(X)[0]>u(X)[1]?1^u(P):u(P)},void 0,!0):(s(),l(a,{key:1,class:n(u(y)("button")),style:i(u(T)(C.buttonSize))},null,8,["class","style"]))])),_:3},8,["class"])],64)):(s(),l(a,{key:1,class:n(R()),onTouchstartPassive:t[3]||(t[3]=e=>q(e)),onTouchmove:m(K,["stop","prevent"]),onTouchend:Q,onTouchcancel:Q},{default:o((()=>[u(j).slots.button?v(e.$slots,"button",{key:0,value:C.modelValue,dragging:D.value},void 0,!0):(s(),l(a,{key:1,class:n(u(y)("button")),style:i(u(T)(C.buttonSize))},null,8,["class","style"]))])),_:3},8,["class"]))])),_:3},8,["class","style"])])),_:3},8,["style","class"])}}}),[["__scopeId","data-v-963ea949"]]);export{j as _};
