import{d as e,k as t,D as o,l as a,o as n,c as l,K as s,G as r,w as i,x as m,L as u}from"./index-f30f5313.js";import{k as c,V as d,i as p,j as f,p as y}from"./DemoPage.cf3c40e0.js";import{s as g,f as D,g as v,a as h}from"./utils.05ef7895.js";import{_ as b}from"./z-picker.f4e3f177.js";const x=e({name:"ZDatePicker",options:{virtualHost:!0},props:c({},g,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date((new Date).getFullYear()-10,0,1),validator:d},maxDate:{type:Date,default:()=>new Date((new Date).getFullYear()+10,11,31),validator:d}}),emits:["confirm","cancel","change","update:modelValue"],setup(e,{emit:c}){const[d]=p("date-picker");f(d);const g=u(),x=e,w=c,k=t(x.modelValue),V=t(!1),F=e=>e===x.minDate.getFullYear(),Y=e=>e===x.maxDate.getFullYear(),$=e=>{const{minDate:t,columnsType:o}=x,a=o.indexOf(e),n=V.value?x.modelValue[a]:k.value[a];if(n)return+n;switch(e){case"year":return t.getFullYear();case"month":return t.getMonth()+1;case"day":return t.getDate()}},T=()=>{const e=$("year"),t=$("month"),o=F(e)&&(e=>e===x.minDate.getMonth()+1)(t)?x.minDate.getDate():1,a=Y(e)&&(e=>e===x.maxDate.getMonth()+1)(t)?x.maxDate.getDate():h(e,t);return v(o,a,"day",x.formatter,x.filter)},j=o((()=>x.columnsType.map((e=>{switch(e){case"year":return(()=>{const e=x.minDate.getFullYear(),t=x.maxDate.getFullYear();return v(e,t,"year",x.formatter,x.filter)})();case"month":return(()=>{const e=$("year"),t=F(e)?x.minDate.getMonth()+1:1,o=Y(e)?x.maxDate.getMonth()+1:12;return v(t,o,"month",x.formatter,x.filter)})();case"day":return T();default:return[]}}))));a(k,(e=>{y(e,x.modelValue)||w("update:modelValue",e)})),a((()=>x.modelValue),((e,t)=>{V.value=y(t,k.value),e=D(e,j.value),y(e,k.value)||(k.value=e),V.value=!1}),{immediate:!0});const M=(...e)=>w("change",...e),C=(...e)=>w("cancel",...e),_=(...e)=>w("confirm",...e);return(e,t)=>(n(),l(b,{modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=e=>k.value=e),columns:j.value,loading:e.loading,readonly:e.readonly,"option-height":e.optionHeight,"show-toolbar":e.showToolbar,"swipe-duration":e.swipeDuration,"visible-option-num":e.visibleOptionNum,title:e.title,"cancel-button-text":e.cancelButtonText,"component-slots":r(g).slots,"confirm-button-text":e.confirmButtonText,onChange:M,onCancel:C,onConfirm:_},s({_:2},[r(g).slots.toolbar?{name:"toolbar",fn:i((()=>[m(e.$slots,"toolbar")])),key:"0"}:void 0,r(g).slots.title?{name:"title",fn:i((()=>[m(e.$slots,"title")])),key:"1"}:void 0,r(g).slots.confirm?{name:"confirm",fn:i((()=>[m(e.$slots,"confirm")])),key:"2"}:void 0,r(g).slots.cancel?{name:"cancel",fn:i((()=>[m(e.$slots,"cancel")])),key:"3"}:void 0,r(g).slots.option?{name:"option",fn:i((()=>[m(e.$slots,"option")])),key:"4"}:void 0,r(g).slots["columns-top"]?{name:"columns-top",fn:i((()=>[m(e.$slots,"columns-top")])),key:"5"}:void 0,r(g).slots["columns-bottom"]?{name:"columns-bottom",fn:i((()=>[m(e.$slots,"columns-bottom")])),key:"6"}:void 0]),1032,["modelValue","columns","loading","readonly","option-height","show-toolbar","swipe-duration","visible-option-num","title","cancel-button-text","component-slots","confirm-button-text"]))}});export{x as _};
