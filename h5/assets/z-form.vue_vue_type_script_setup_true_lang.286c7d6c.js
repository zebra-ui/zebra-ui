import{d as e,o as a,c as t,w as r,x as o,n as s,G as n,i}from"./index-f30f5313.js";import{u as l}from"./useChildren.47d4431b.js";import{n as d,t as m,i as u,j as c,v as g,Q as h}from"./DemoPage.cf3c40e0.js";const f=e({name:"ZForm",options:{virtualHost:!0},props:{colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:d,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:m,showErrorMessage:m,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}},emits:["submit","failed"],setup(e,{expose:d,emit:m}){const[f,p]=u("form");c(f);const v=e,V=m,{children:B,linkChildren:b}=l(h),S=e=>e?B.filter((a=>e.includes(a.name))):B,w=e=>{return"string"==typeof e?(e=>{const a=B.find((a=>a.name===e));return a?new Promise(((e,t)=>{a.validate().then((a=>{a?t(a):e()}))})):Promise.reject()})(e):v.validateFirst?(a=e,new Promise(((e,t)=>{const r=[];S(a).reduce(((e,a)=>e.then((()=>{if(!r.length)return a.validate().then((e=>{e&&r.push(e)}))}))),Promise.resolve()).then((()=>{r.length?t(r):e()}))}))):(e=>new Promise(((a,t)=>{const r=S(e);Promise.all(r.map((e=>e.validate()))).then((e=>{(e=e.filter(Boolean)).length?t(e):a()}))})))(e);var a},P=e=>{"string"==typeof e&&(e=[e]);S(e).forEach((e=>{e.resetValidation()}))},E=()=>B.reduce(((e,a)=>(e[a.name]=a.getValidationStatus(),e)),{}),j=(e,a)=>{B.some((t=>t.name===e&&(t.$el.scrollIntoView(a),!0)))},y=()=>B.reduce(((e,a)=>(void 0!==a.name&&(e[a.name]=a.formValue.value),e)),{}),F=()=>{const e=y();w().then((()=>V("submit",e))).catch((a=>{V("failed",{values:e,errors:a}),v.scrollToError&&a[0].name&&j(a[0].name)}))};return b({props:v}),g({submit:F,validate:w,getValues:y,scrollToField:j,resetValidation:P,getValidationStatus:E}),d({submit:F,validate:w,getValues:y,scrollToField:j,resetValidation:P,getValidationStatus:E}),(e,l)=>{const d=i;return a(),t(d,{class:s(n(p)())},{default:r((()=>[o(e.$slots,"default")])),_:3},8,["class"])}}});export{f as _};
