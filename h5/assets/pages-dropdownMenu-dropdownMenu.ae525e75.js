import{d as e,a5 as l,D as o,ae as a,af as t,o as s,c as u,w as d,a as n,G as i,e as p,F as r,r as c,p as m,x as v,y as f,n as h,i as V,_ as w,k as y,A as _,b as g,t as k,L as x,m as b,E as z}from"./index-f30f5313.js";import{u as C}from"./useParent.17bb91a9.js";import{l as U,t as P,E as O,i as j,j as I,A as W,y as $,v as D,d as B,z as S,n as E,m as H,s as L,I as M,M as G,x as T,a1 as A,r as Z,a as F,_ as R}from"./DemoPage.cf3c40e0.js";import{_ as q}from"./z-cell.b545d216.js";import{u as J}from"./useChildren.47d4431b.js";import{u as K}from"./use-id.cdfa0884.js";import{_ as N}from"./z-switch.86fc7afc.js";import"./index.3b818c1b.js";const Q=w(e({name:"ZDropdownItem",options:{virtualHost:!0},props:{title:String,options:U(),disabled:Boolean,lazyRender:P,modelValue:O,titleClass:O,inheritWidth:P,overlayBackGroud:Boolean},emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{expose:w,emit:y}){const[_,g]=j("dropdown-item");I(_);const k=e,x=y,b=l({showPopup:!1,transition:!0,showWrapper:!1}),{parent:z}=C("z-dropdown-menu"),U=o((()=>{const{zIndex:e,direction:l}=z.props,{offset:o}=z,a=W(e);let t=o.value;return"down"===l?a.top=`${t}px`:a.bottom=`${t}px`,k.inheritWidth&&(a.width=$(z.itemWidth.value),a.left=$(z.itemLeft.value)),a})),P=o((()=>({display:"block","line-height":"inherit"}))),O=e=>{const l={"text-align":"left"};return e.value===k.modelValue&&(l.color="var(--z-dropdown-menu-option-active-color)",P.value.color="var(--z-dropdown-menu-option-active-color)",z.props.activeColor&&(l.color=z.props.activeColor,P.value.color=z.props.activeColor)),{...l}},E=e=>()=>x(e),H=E("open"),L=E("close"),M=E("opened"),G=()=>{b.showWrapper=!1,x("closed")},T=e=>{},A=o((()=>({position:"absolute",maxHeight:"var(--z-dropdown-menu-content-max-height)"}))),Z=(e=!b.showPopup,l={})=>{e!==b.showPopup&&(b.showPopup=e,b.transition=!l.immediate,e&&(z.updateOffset(),b.showWrapper=!0))};return D({state:b,toggle:Z,props:k}),w({state:b,toggle:Z,props:k}),(l,o)=>{const w=V;return a((s(),u(w,{style:f(U.value),class:h(i(g)([i(z).props.direction])),onClick:T},{default:d((()=>[n(B,{show:b.showPopup,"onUpdate:show":o[0]||(o[0]=e=>b.showPopup=e),"custom-style":A.value,overlay:i(z).props.overlay,"overlay-back-groud":e.overlayBackGroud,position:"down"===i(z).props.direction?"top":"bottom",duration:b.transition?i(z).props.duration:0,"overlay-style":{position:"absolute"},"close-on-click-overlay":i(z).props.closeOnClickOverlay,onOpen:i(H),onClose:i(L),onOpened:i(M),onClosed:G},{default:d((()=>[(s(!0),p(r,null,c(k.options,((e,l)=>(s(),u(q,{key:l,icon:e.icon,title:e.text,"custom-style":O(e),clickable:"",onClick:l=>(e=>{b.showPopup=!1,e.value!==k.modelValue&&(x("update:modelValue",e.value),x("change",e.value))})(e)},{default:d((()=>[e.value===k.modelValue?(s(),u(S,{key:0,"custom-style":P.value,size:"var(--z-font-size-lg)",color:i(z).props.activeColor,name:"check"},null,8,["custom-style","color"])):m("",!0)])),_:2},1032,["icon","title","custom-style","onClick"])))),128)),v(l.$slots,"default",{},void 0,!0)])),_:3},8,["show","custom-style","overlay","overlay-back-groud","position","duration","close-on-click-overlay","onOpen","onClose","onOpened"])])),_:3},8,["style","class"])),[[t,b.showWrapper]])}}}),[["__scopeId","data-v-f4b3f9b9"]]),X=w(e({name:"ZDropdownMenu",options:{virtualHost:!0},props:{overlay:P,zIndex:E,duration:H(.2),direction:L("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:P,closeOnClickOverlay:P,swipeThreshold:E},setup(e,{expose:l}){const[a,t]=j("dropdown-menu"),m=e,w=K(),b=y(0),z=x(),{children:C,linkChildren:U}=J(a),P=o((()=>C.some((e=>e.state.showWrapper)))),O=o((()=>m.swipeThreshold&&C.length>+m.swipeThreshold)),I=o((()=>{if(P.value&&M(m.zIndex))return{zIndex:+m.zIndex+1}})),W=()=>{C.forEach((e=>{e.toggle(!1)}))},$=o((()=>_().windowHeight)),B=y(0),S=y(0),E=()=>{T(z,".z-dropdown-menu-rect").then((e=>{const l=e;B.value=null==e?void 0:e.width,S.value=null==e?void 0:e.left,"down"===m.direction?b.value=l.bottom:b.value=$.value-l.top}))},H=()=>{P.value&&E()},L=e=>{const l=e.props.options.find((l=>l.value===e.props.modelValue));return l?l.text:""};return D({close:W,onScroll:H}),l({close:W,onScroll:H}),U({id:w,props:m,offset:b,updateOffset:E,itemWidth:B,itemLeft:S}),(e,l)=>{const o=V;return s(),u(o,{class:h(i(t)())},{default:d((()=>[n(o,{class:h(["z-dropdown-menu-rect",i(t)("bar",{opened:P.value.value,scrollable:O.value})]),style:f(I.value)},{default:d((()=>[(s(!0),p(r,null,c(i(C),((l,a)=>(s(),u(o,{key:a,id:`${i(w)}-${a}`,class:h([i(t)("item",{disabled:l.disabled,grow:O.value}),{[i(G)]:!l.disabled}]),onClick:()=>{var e;l.disabled||(e=a,C.forEach(((l,o)=>{o===e?l.toggle():l.state.showPopup&&l.toggle(!1,{immediate:!0})})))}},{default:d((()=>[n(o,{class:h([i(t)("title",{down:l.state.showPopup===("down"===m.direction),active:l.state.showPopup}),l.titleClass]),style:f({color:l.state.showPopup?m.activeColor:""})},{default:d((()=>[n(o,{class:"z-ellipsis"},{default:d((()=>[i(z).slots.title?v(e.$slots,"title",{key:0,item:l},void 0,!0):l.props.title?(s(),p(r,{key:1},[g(k(l.props.title),1)],64)):(s(),p(r,{key:2},[g(k(L(l)),1)],64))])),_:2},1024)])),_:2},1032,["class","style"])])),_:2},1032,["id","class","onClick"])))),128))])),_:3},8,["style","class"]),v(e.$slots,"default",{},void 0,!0)])),_:3},8,["class"])}}}),[["__scopeId","data-v-aef0637d"]]),Y=e({__name:"dropdownMenu",setup(e){const l=y(0),o=y("a"),a=[{text:"全部商品",value:0},{text:"新款商品",value:1},{text:"活动商品",value:2}],t=[{text:"默认排序",value:"a"},{text:"好评排序",value:"b"},{text:"销量排序",value:"c"}],i=y(),p=y(!0),r=y(!1),c=()=>{var e;null==(e=i.value)||e.toggle()},m=y();return A((()=>{m.value.onScroll()})),(e,v)=>{const f=Z(b("z-dropdown-item"),Q),h=Z(b("z-dropdown-menu"),X),w=z("demo-block"),y=Z(b("z-switch"),N),_=Z(b("z-cell"),q),k=Z(b("z-button"),F),x=V,C=Z(b("DemoPage"),R);return s(),u(C,{title:"DropdownMenu"},{default:d((()=>[n(x,{class:"demo-dropdown-menu"},{default:d((()=>[n(w,{title:"基础用法"},{default:d((()=>[n(h,{ref_key:"dropdown1",ref:m},{default:d((()=>[n(f,{modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=e=>l.value=e),options:a},null,8,["modelValue"]),n(f,{modelValue:o.value,"onUpdate:modelValue":v[1]||(v[1]=e=>o.value=e),options:t},null,8,["modelValue"])])),_:1},512)])),_:1}),n(w,{title:"自定义菜单内容"},{default:d((()=>[n(h,null,{default:d((()=>[n(f,{modelValue:l.value,"onUpdate:modelValue":v[2]||(v[2]=e=>l.value=e),options:a},null,8,["modelValue"]),n(f,{title:"筛选",ref_key:"item",ref:i},{default:d((()=>[n(_,{center:"",title:"选项一"},{"right-icon":d((()=>[n(y,{modelValue:p.value,"onUpdate:modelValue":v[3]||(v[3]=e=>p.value=e)},null,8,["modelValue"])])),_:1}),n(_,{center:"",title:"选项二"},{"right-icon":d((()=>[n(y,{modelValue:r.value,"onUpdate:modelValue":v[4]||(v[4]=e=>r.value=e)},null,8,["modelValue"])])),_:1}),n(x,{style:{padding:"10rpx 32rpx"}},{default:d((()=>[n(k,{type:"primary",block:"",round:"",style:{height:"80rpx"},onClick:c},{default:d((()=>[g(" 确认 ")])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1}),n(w,{title:"自定义选中颜色"},{default:d((()=>[n(h,{"active-color":"#ee0a24"},{default:d((()=>[n(f,{modelValue:l.value,"onUpdate:modelValue":v[5]||(v[5]=e=>l.value=e),options:a},null,8,["modelValue"]),n(f,{modelValue:o.value,"onUpdate:modelValue":v[6]||(v[6]=e=>o.value=e),options:t},null,8,["modelValue"])])),_:1})])),_:1}),n(w,{title:"横向滚动"},{default:d((()=>[n(h,{"swipe-threshold":"4"},{default:d((()=>[n(f,{modelValue:l.value,"onUpdate:modelValue":v[7]||(v[7]=e=>l.value=e),options:a},null,8,["modelValue"]),n(f,{modelValue:o.value,"onUpdate:modelValue":v[8]||(v[8]=e=>o.value=e),options:t},null,8,["modelValue"]),n(f,{modelValue:o.value,"onUpdate:modelValue":v[9]||(v[9]=e=>o.value=e),options:t},null,8,["modelValue"]),n(f,{modelValue:o.value,"onUpdate:modelValue":v[10]||(v[10]=e=>o.value=e),options:t},null,8,["modelValue"]),n(f,{modelValue:o.value,"onUpdate:modelValue":v[11]||(v[11]=e=>o.value=e),options:t},null,8,["modelValue"])])),_:1})])),_:1}),n(w,{title:"向上展开"},{default:d((()=>[n(h,{direction:"up"},{default:d((()=>[n(f,{modelValue:l.value,"onUpdate:modelValue":v[12]||(v[12]=e=>l.value=e),options:a},null,8,["modelValue"]),n(f,{modelValue:o.value,"onUpdate:modelValue":v[13]||(v[13]=e=>o.value=e),options:t},null,8,["modelValue"])])),_:1})])),_:1}),n(w,{title:"禁用菜单"},{default:d((()=>[n(h,null,{default:d((()=>[n(f,{modelValue:l.value,"onUpdate:modelValue":v[14]||(v[14]=e=>l.value=e),disabled:"",options:a},null,8,["modelValue"]),n(f,{modelValue:o.value,"onUpdate:modelValue":v[15]||(v[15]=e=>o.value=e),disabled:"",options:t},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})}}});export{Y as default};
