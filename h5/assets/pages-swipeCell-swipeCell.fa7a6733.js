import{m as e,n as t,i as s,j as a,I as l,C as o,v as i,G as r,D as n,x as c,r as d,a as u,_ as f}from"./DemoPage.cf3c40e0.js";import{d as p,a5 as m,D as g,k as h,I as v,o as _,c as w,w as y,a as z,n as b,G as x,y as j,x as k,p as C,z as P,L as q,i as D,_ as W,m as T,E as $,b as I}from"./index-f30f5313.js";import{_ as B}from"./z-cell.b545d216.js";import{u as G}from"./use-touch.6469fcb8.js";import{_ as H}from"./z-card.ee7294ee.js";import"./z-toast.1a41a7b4.js";import{u as S}from"./z-dialog.a22a98be.js";const E=W(p({name:"ZSwipeCell",options:{virtualHost:!0},props:{name:e(""),disabled:Boolean,leftWidth:t,rightWidth:t,beforeClose:Function,stopPropagation:Boolean},emits:["open","close","click"],setup(e,{expose:t,emit:d}){const u=q(),[f,p]=s("swipe-cell");a(f);const W=e,T=d;let $,I,B,H;const S=m({offset:0,dragging:!1}),E=G(),F=g((()=>({transform:`translate3d(${S.offset}px, 0, 0)`,transitionDuration:S.dragging?"0s":".6s"}))),K=h({left:0,right:0}),L=e=>K.value[e],M=g((()=>l(W.leftWidth)?+W.leftWidth:L("left"))),X=g((()=>l(W.rightWidth)?+W.rightWidth:L("right"))),Z=e=>{S.offset="left"===e?M.value:-X.value,$||($=!0,T("open",{name:W.name,position:e}))},A=e=>{S.offset=0,$&&($=!1,T("close",{name:W.name,position:e}))},J=e=>{W.disabled||(B=S.offset,E.start(e))},N=e=>{if(W.disabled)return;const{deltaX:t}=E;E.move(e),E.isHorizontal()&&(I=!0,S.dragging=!0,!$||t.value,S.offset=r(t.value+B,-X.value,M.value))},O=()=>{S.dragging&&(S.dragging=!1,(e=>{const t=Math.abs(S.offset),s=$?.85:.15,a="left"===e?M.value:X.value;a&&t>a*s?Z(e):A(e)})(S.offset>0?"left":"right"),setTimeout((()=>{I=!1}),0))},Q=(e,t,s)=>{s&&e.stopPropagation(),((e="outside")=>{H||(T("click",e),$&&!I&&(H=!0,n(W.beforeClose,{args:[{name:W.name,position:e}],done:()=>{H=!1,A(e)},canceled:()=>H=!1,error:()=>H=!1})))})(t)};return v((()=>{o((()=>{Promise.all([c(u,".z-cell-left-rect"),c(u,".z-cell-right-rect")]).then((([e,t])=>{K.value.left=(null==e?void 0:e.width)?null==e?void 0:e.width:0,K.value.right=(null==t?void 0:t.width)?null==t?void 0:t.width:0}))}))})),i({open:Z,close:A}),t({open:Z,close:A}),(e,t)=>{const s=D;return _(),w(s,{class:b(x(p)()),onClick:t[2]||(t[2]=P((e=>Q(e,"cell",x(I))),["stop"])),onTouchstartPassive:J,onTouchmovePassive:N,onTouchend:O,onTouchcancel:O},{default:y((()=>[z(s,{class:b(x(p)("wrapper")),style:j(F.value)},{default:y((()=>[x(u).slots.left?(_(),w(s,{key:0,class:b(["z-cell-left-rect",x(p)("left")]),onClick:t[0]||(t[0]=e=>Q(e,"left",!0))},{default:y((()=>[k(e.$slots,"left",{},void 0,!0)])),_:3},8,["class"])):C("",!0),k(e.$slots,"default",{},void 0,!0),x(u).slots.right?(_(),w(s,{key:1,class:b(["z-cell-right-rect",x(p)("right")]),onClick:t[1]||(t[1]=e=>Q(e,"right",!0))},{default:y((()=>[k(e.$slots,"right",{},void 0,!0)])),_:3},8,["class"])):C("",!0)])),_:3},8,["class","style"])])),_:3},8,["class"])}}}),[["__scopeId","data-v-bc206c83"]]),F=p({__name:"swipeCell",setup(e){const t=S(),s=h("https://cdn.zebraui.com/zebra-ui/images/swipe-demo/swipe1.jpg"),a=({position:e})=>{switch(e){case"left":case"cell":case"outside":return!0;case"right":return new Promise((e=>{t.showConfirmDialog({title:"确定删除吗"}).then((()=>e(!0))).catch((()=>e(!1)))}))}};return(e,t)=>{const l=d(T("z-button"),u),o=d(T("z-cell"),B),i=d(T("z-swipe-cell"),E),r=$("demo-block"),n=d(T("z-card"),H),c=D,p=d(T("DemoPage"),f);return _(),w(p,{title:"SwipeCell"},{default:y((()=>[z(c,{class:"demo-swipe-cell"},{default:y((()=>[z(r,{title:"基础用法"},{default:y((()=>[z(i,null,{left:y((()=>[z(l,{square:"",type:"primary",text:"选择"})])),right:y((()=>[z(l,{square:"",type:"danger",text:"删除"}),z(l,{square:"",type:"primary",text:"收藏"})])),default:y((()=>[z(o,{border:!1,title:"单元格",value:"内容"})])),_:1})])),_:1}),z(r,{title:"自定义内容"},{default:y((()=>[z(i,null,{right:y((()=>[z(l,{square:"",type:"danger",text:"删除","custom-style":{height:"100%"}})])),default:y((()=>[z(n,{title:"标题",cover:s.value,"header-bordered":""},{actions:y((()=>[z(l,{type:"primary",size:"mini"},{default:y((()=>[I("操作")])),_:1})])),default:y((()=>[I(" 这是一段文字 ")])),_:1},8,["cover"])])),_:1})])),_:1}),z(r,{title:"异步关闭"},{default:y((()=>[z(i,{"before-close":a},{left:y((()=>[z(l,{square:"",type:"primary",text:"选择"})])),right:y((()=>[z(l,{square:"",type:"danger",text:"删除"})])),default:y((()=>[z(o,{border:!1,title:"单元格",value:"内容"})])),_:1})])),_:1})])),_:1})])),_:1})}}});export{F as default};
