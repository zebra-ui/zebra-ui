import{d as e,k as t,D as o,l as n,o as l,c as s,K as i,G as a,w as c,x as r,L as u}from"./index-f30f5313.js";import{m,l as d,v as p}from"./DemoPage.cf3c40e0.js";import{_ as v}from"./z-picker.f4e3f177.js";const f="000000",g=(e="",t=f,o=void 0)=>({text:e,value:t,children:o});function h({areaList:e,columnsNum:t,columnsPlaceholder:o}){const{city_list:n={},county_list:l={},province_list:s={}}=e,i=+t>1,a=+t>2,c=new Map;Object.keys(s).forEach((e=>{c.set(e.slice(0,2),g(s[e],e,(()=>{if(i)return o.length?[g(o[0],f,a?[]:void 0)]:[]})()))}));const r=new Map;if(i){const e=()=>{if(a)return o.length?[g(o[1])]:[]};Object.keys(n).forEach((t=>{const o=g(n[t],t,e());r.set(t.slice(0,4),o);const l=c.get(t.slice(0,2));l&&l.children.push(o)}))}a&&Object.keys(l).forEach((e=>{const t=r.get(e.slice(0,4));t&&t.children.push(g(l[e],e))}));const u=Array.from(c.values());if(o.length){const e=a?[g(o[2])]:void 0,t=i?[g(o[1],f,e)]:void 0;u.unshift(g(o[0],f,t))}return u}const b=e({name:"ZArea",options:{virtualHost:!0},props:{loading:Boolean,readonly:Boolean,optionHeight:m(44),swipeDuration:m(1e3),visibleOptionNum:m(6),title:String,cancelButtonText:String,confirmButtonText:String,modelValue:String,columnsNum:m(3),columnsPlaceholder:d(),areaList:{type:Object,default:()=>({})}},emits:["change","confirm","cancel","update:modelValue"],setup(e,{expose:m,emit:d}){const f=u(),g=e,b=d,y=t([]),k=t(),x=o((()=>h(g))),O=(...e)=>b("change",...e),S=(...e)=>b("cancel",...e),V=(...e)=>b("confirm",...e);return n(y,(e=>{const t=e.length?e[e.length-1]:"";t&&t!==g.modelValue&&b("update:modelValue",t)}),{deep:!0}),n((()=>g.modelValue),(e=>{if(e){e!==(y.value.length?y.value[y.value.length-1]:"")&&(y.value=[`${e.slice(0,2)}0000`,`${e.slice(0,4)}00`,e].slice(0,+g.columnsNum))}else y.value=[]}),{immediate:!0}),p({confirm:()=>{var e;return null==(e=k.value)?void 0:e.confirm()},getSelectedOptions:()=>{var e;return(null==(e=k.value)?void 0:e.getSelectedOptions())||[]}}),m({confirm:()=>{var e;return null==(e=k.value)?void 0:e.confirm()},getSelectedOptions:()=>{var e;return(null==(e=k.value)?void 0:e.getSelectedOptions())||[]}}),(e,t)=>(l(),s(v,{ref_key:"picker",ref:k,modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),columns:x.value,onChange:O,onCancel:S,onConfirm:V,title:g.title,loading:g.loading,readonly:g.readonly,"option-height":g.optionHeight,"swipe-duration":g.swipeDuration,"visible-option-num":g.visibleOptionNum,"cancel-button-text":g.cancelButtonText,"confirm-button-text":g.confirmButtonText,"component-slots":a(f).slots},i({_:2},[a(f).slots.title?{name:"title",fn:c((()=>[r(e.$slots,"title")])),key:"0"}:void 0,a(f).slots.cancel?{name:"cancel",fn:c((()=>[r(e.$slots,"cancel")])),key:"1"}:void 0,a(f).slots.confirm?{name:"confirm",fn:c((()=>[r(e.$slots,"confirm")])),key:"2"}:void 0,a(f).slots.toolbar?{name:"toolbar",fn:c((()=>[r(e.$slots,"toolbar")])),key:"3"}:void 0,a(f).slots["columns-top"]?{name:"columns-top",fn:c((()=>[r(e.$slots,"columns-top")])),key:"4"}:void 0,a(f).slots["columns-bottom"]?{name:"columns-bottom",fn:c((()=>[r(e.$slots,"columns-bottom")])),key:"5"}:void 0]),1032,["modelValue","columns","title","loading","readonly","option-height","swipe-duration","visible-option-num","cancel-button-text","confirm-button-text","component-slots"]))}});export{b as _};
