import{d as e,k as a,D as l,l as s,o as t,c as u,w as n,ae as i,a as o,y as r,n as d,G as m,af as c,ad as p,a4 as v,J as h,i as g,_ as b}from"./index-f30f5313.js";import{u as f}from"./index.3b818c1b.js";import{m as x,t as y,n as S,i as w,j as P,y as V,X as T,M as I,P as B,I as M,D as C,Y as F,Z as _}from"./DemoPage.cf3c40e0.js";const j=b(e({name:"ZStepper",options:{virtualHost:!0},props:{min:x(1),max:x(1/0),name:x(""),step:x(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:y,showMinus:y,showInput:y,longPress:y,autoFixed:y,allowEmpty:Boolean,modelValue:S,inputWidth:S,buttonSize:S,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:x(1),decimalLength:S},emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:b}){const[x,y]=w("stepper");P(x);const S=(e,a)=>String(e)===String(a),j=e,L=b,k=(e,a=!0)=>{const{min:l,max:s,allowEmpty:t,decimalLength:u}=j;return t&&""===e||(e=""===(e=B(String(e),!j.integer))?0:+e,e=Number.isNaN(e)?+l:e,e=a?Math.max(Math.min(+s,e),+l):e,M(u)&&(e=e.toFixed(+u))),e};let z;const D=a(),N=a((()=>{const e=j.modelValue?j.modelValue:j.defaultValue,a=k(e);return S(a,j.modelValue)||L("update:modelValue",a),a})()),E=l((()=>j.disabled||j.disableMinus||+N.value<=+j.min)),W=l((()=>j.disabled||j.disablePlus||+N.value>=+j.max)),Z=l((()=>({width:V(j.inputWidth),height:V(j.buttonSize)}))),$=l((()=>T(j.buttonSize))),G=e=>{j.beforeChange?C(j.beforeChange,{args:[e],done(){N.value=e}}):N.value=e},H=()=>{if("plus"===z&&W.value||"minus"===z&&E.value)return void L("overlimit",z);const e="minus"===z?-j.step:+j.step,a=k(F(+N.value,e));G(a),L(z)},J=e=>{const a=e.target,{value:l}=a,{decimalLength:s}=j;let t=B(String(l),!j.integer);if(M(s)&&t.includes(".")){const e=t.split(".");t=`${e[0]}.${e[1].slice(0,+s)}`}j.beforeChange?a.value=String(N.value):S(l,t)||(a.value=t);const u=t===String(+t);G(u?+t:t)},X=e=>{var a;j.disableInput?null==(a=D.value)||a.blur():L("focus",e)},Y=e=>{const a=e.detail,l=k(a.value,j.autoFixed);a.value=String(l),N.value=l,p((()=>{L("blur",e)}))};let q;const A=()=>{q=setTimeout((()=>{H(),A()}),200)},K=e=>{j.longPress&&clearTimeout(q)},O=(e,a)=>{z=a,H()},Q=(e,a)=>{z=a,j.longPress&&(clearTimeout(q),q=setTimeout((()=>{H(),A()}),_))};return s((()=>[j.max,j.min,j.integer,j.decimalLength]),(()=>{const e=k(N.value);S(e,N.value)||(N.value=e)})),s((()=>j.modelValue),(e=>{S(e,N.value)||(N.value=k(e))})),s(N,(e=>{L("update:modelValue",e),L("change",e,{name:j.name})})),f((()=>j.modelValue)),(e,a)=>{const l=v,s=h,p=g;return t(),u(p,{class:d(m(y)([j.theme]))},{default:n((()=>[i(o(l,{type:"button",style:r($.value),class:d([m(y)("minus",{disabled:E.value}),{[m(I)]:!E.value}]),onClick:a[0]||(a[0]=e=>O(0,"minus")),onTouchstartPassive:a[1]||(a[1]=e=>Q(0,"minus")),onTouchend:K,onTouchcancel:K},null,8,["style","class"]),[[c,j.showMinus]]),i(o(s,{type:j.integer?"number":"digit",class:d(m(y)("input")),value:N.value,style:r(Z.value),disabled:j.disabled||j.disableInput,inputmode:j.integer?"numeric":"decimal",placeholder:j.placeholder,"aria-valuemax":j.max,"aria-valuemin":j.min,"aria-valuenow":N.value,onBlur:Y,onInput:J,onFocus:X},null,8,["type","class","value","style","disabled","inputmode","placeholder","aria-valuemax","aria-valuemin","aria-valuenow"]),[[c,j.showInput]]),i(o(l,{type:"button",style:r($.value),class:d([m(y)("plus",{disabled:W.value}),{[m(I)]:!W.value}]),onClick:a[2]||(a[2]=e=>O(0,"plus")),onTouchstartPassive:a[3]||(a[3]=e=>Q(0,"plus")),onTouchend:K,onTouchcancel:K},null,8,["style","class"]),[[c,j.showPlus]])])),_:1},8,["class"])}}}),[["__scopeId","data-v-0865132a"]]);export{j as _};
