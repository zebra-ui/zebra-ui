import{d as o,k as e,D as t,l as n,o as s,c as i,K as a,G as l,w as m,x as u,L as c}from"./index-f30f5313.js";import{s as r,g as d,f as p}from"./utils.05ef7895.js";import{k as f,m as v,i as x,j as h,p as y}from"./DemoPage.cf3c40e0.js";import{_ as b}from"./z-picker.f4e3f177.js";const T=o({name:"ZTimePicker",options:{virtualHost:!0},props:f({},r,{minHour:v(0),maxHour:v(23),minMinute:v(0),maxMinute:v(59),minSecond:v(0),maxSecond:v(59),minTime:{type:String,validator:o=>/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/.test(o)},maxTime:{type:String,validator:o=>/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/.test(o)},columnsType:{type:Array,default:()=>["hour","minute"]},filter:Function}),emits:["confirm","cancel","change","update:modelValue"],setup(o,{emit:r}){const[f]=x("time-picker");h(f);const v=["hour","minute","second"],T=c(),g=o,k=r,w=e(g.modelValue),$=o=>{const e=o.split(":");return v.map(((o,t)=>g.columnsType.includes(o)?e[t]:"00"))},V=t((()=>{let{minHour:o,maxHour:e,minMinute:t,maxMinute:n,minSecond:s,maxSecond:i}=g;if(g.minTime||g.maxTime){const a={hour:0,minute:0,second:0};g.columnsType.forEach(((o,e)=>{a[o]=w.value[e]?w.value[e]:0}));const{hour:l,minute:m}=a;if(g.minTime){const[e,n,i]=$(g.minTime);o=e,t=+l<=+o?n:"00",s=+l<=+o&&+m<=+t?i:"00"}if(g.maxTime){const[o,t,s]=$(g.maxTime);e=o,n=+l>=+e?t:"59",i=+l>=+e&&+m>=+n?s:"59"}}return g.columnsType.map((a=>{const{filter:l,formatter:m}=g;switch(a){case"hour":return d(+o,+e,a,m,l,w.value);case"minute":return d(+t,+n,a,m,l,w.value);case"second":return d(+s,+i,a,m,l,w.value);default:return[]}}))}));n(w,(o=>{y(o,g.modelValue)||k("update:modelValue",o)})),n((()=>g.modelValue),(o=>{o=p(o,V.value),y(o,w.value)||(w.value=o)}),{immediate:!0});const H=(...o)=>k("change",...o),S=(...o)=>k("cancel",...o),j=(...o)=>k("confirm",...o);return(o,e)=>(s(),i(b,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=o=>w.value=o),columns:V.value,loading:o.loading,readonly:o.readonly,"option-height":o.optionHeight,"show-toolbar":o.showToolbar,"swipe-duration":o.swipeDuration,"visible-option-num":o.visibleOptionNum,title:o.title,"cancel-button-text":o.cancelButtonText,"component-slots":l(T).slots,"confirm-button-text":o.confirmButtonText,onChange:H,onCancel:S,onConfirm:j},a({_:2},[l(T).slots.toolbar?{name:"toolbar",fn:m((()=>[u(o.$slots,"toolbar")])),key:"0"}:void 0,l(T).slots.title?{name:"title",fn:m((()=>[u(o.$slots,"title")])),key:"1"}:void 0,l(T).slots.confirm?{name:"confirm",fn:m((()=>[u(o.$slots,"confirm")])),key:"2"}:void 0,l(T).slots.cancel?{name:"cancel",fn:m((()=>[u(o.$slots,"cancel")])),key:"3"}:void 0,l(T).slots.option?{name:"option",fn:m((()=>[u(o.$slots,"option")])),key:"4"}:void 0,l(T).slots["columns-top"]?{name:"columns-top",fn:m((()=>[u(o.$slots,"columns-top")])),key:"5"}:void 0,l(T).slots["columns-bottom"]?{name:"columns-bottom",fn:m((()=>[u(o.$slots,"columns-bottom")])),key:"6"}:void 0]),1032,["modelValue","columns","loading","readonly","option-height","show-toolbar","swipe-duration","visible-option-num","title","cancel-button-text","component-slots","confirm-button-text"]))}});export{T as _};
