import{d as e,k as t,D as s,I as l,l as a,o as n,e as o,a as i,w as c,F as u,b as p,t as r,c as d,n as v,G as x,x as m,p as f,y as h,L as y,v as w,ad as z,i as _,_ as g,m as b,E as k}from"./index-f30f5313.js";import{m as S,s as T,i as P,j,K as D,v as E,C as H,x as I,y as M,r as A,_ as C}from"./DemoPage.cf3c40e0.js";const N=g(e({name:"ZTextEllipsis",options:{virtualHost:!0},props:{rows:S(1),dots:T("..."),content:T(""),expandText:T(""),collapseText:T(""),position:T("end"),customStyle:Object},emits:["clickAction"],setup(e,{expose:g,emit:b}){const[k,S]=P("text-ellipsis");j(k);const T=y(),A=e,C=b,N=t(""),Z=t(!1),B=t(!1),F=s((()=>Z.value?A.collapseText:A.expandText)),G=e=>{if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0},K=t(!1),L=t({}),O=t(""),$=()=>{const e=(e,t)=>new Promise((e=>{const{content:s,position:l,dots:a}=A,n=s.length,o=(e,l)=>new Promise((i=>{if(e[1]-e[0]<=1&&l[1]-l[0]<=1)return void i(s.slice(0,e[0])+a+s.slice(l[1],n));const c=Math.floor((e[0]+e[1])/2),u=Math.ceil((l[0]+l[1])/2);O.value=A.content.slice(0,c)+A.dots+A.content.slice(u,n)+A.expandText,H((()=>{I(T,".z-text-ellipsis-rect").then((s=>{const{height:a}=s;i(a>=t?o([e[0],c],[u,l[1]]):o([c,e[1]],[l[0],u]))}))}))})),i=0+n>>1;"middle"===A.position?o([0,i],[i,n]).then((t=>{O.value=t,e(t)})):new Promise((e=>{const o=(e,i)=>new Promise((c=>{if(i-e<=1)return"end"===l?void c(s.slice(0,e)+a):void c(a+s.slice(i,n));const u=Math.round((e+i)/2);O.value="end"===l?s.slice(0,u)+a+F.value:a+s.slice(u,n)+F.value,H((()=>{I(T,".z-text-ellipsis-rect").then((s=>{const{height:a}=s;if(a>t)return"end"===l?void c(o(e,u)):void c(o(u,i));c("end"!==l?o(e,u):o(u,i))}))}))}));o(0,n).then((t=>{O.value=t,e(t)}))})).then((t=>{e(t)}))}));H((()=>{I(T,".z-text-ellipsis-ph").then((t=>{const s=(l=t.width,L.value.position="fixed",L.value.zIndex="-9999",L.value.top="-19998rpx",L.value.height="auto",L.value.width=M(l),L.value.minHeight="auto",L.value.maxHeight="auto",O.value=A.content,K.value=!0,L.value);var l;if(!s)return;if(!A.customStyle||!A.customStyle["font-size"])return void console.warn("[Zebra] 请通过customStyle设置font-size！");let{paddingBottom:a=0,paddingTop:n=0,lineHeight:o,"font-size":i}=A.customStyle;o||"0"==o||(o=1.6*w(G(i)));const c=Math.ceil((Number(A.rows)+.5)*o+G(n)+G(a));z((()=>{H((()=>{I(T,".z-text-ellipsis-rect").then((t=>{c<t.height?(B.value=!0,e(0,c).then((e=>{N.value=e,K.value=!1}))):(B.value=!1,N.value=A.content,K.value=!1)}))}))}))}))}))},q=(e=!Z.value)=>{Z.value=e},J=e=>{q(),C("clickAction",e)};return l($),a([D,()=>[A.content,A.rows,A.position]],$),E({toggle:q}),g({toggle:q}),(t,s)=>{const l=_;return n(),o(u,null,[i(l,{class:"z-text-ellipsis-ph",style:{width:"100%"}}),i(l,{class:v(x(S)()),style:h(e.customStyle)},{default:c((()=>[Z.value?(n(),o(u,{key:0},[p(r(A.content),1)],64)):(n(),o(u,{key:1},[p(r(N.value),1)],64)),B.value?(n(),d(l,{key:2,class:v(x(S)("action")),onClick:J},{default:c((()=>[x(T).slots.action?m(t.$slots,"action",{key:0,expanded:Z.value},void 0,!0):(n(),o(u,{key:1},[p(r(F.value),1)],64))])),_:3},8,["class"])):f("",!0)])),_:3},8,["class","style"]),K.value?(n(),d(l,{key:0,class:v(["z-text-ellipsis-rect",x(S)()]),style:h({...L.value,...e.customStyle})},{default:c((()=>[p(r(O.value),1)])),_:1},8,["class","style"])):f("",!0)],64)}}}),[["__scopeId","data-v-262ba9ba"]]),Z=g(e({__name:"textEllipsis",setup(e){const s=t("zebra-swiper 是基于uniapp开发的一款适配多端的移动端轮播组件。"),l=t("uniapp 的swiper组件存在很大的局限性，无法完成一些复杂的轮播效果。而zebra-swiper不仅可以实现一些3D轮播效果，还可以通过参数来定义你想要的效果。"),a=t("zebra-swiper 是基于uniapp开发的一款移动端轮播组件。uniapp 的swiper组件存在很大的局限性，无法完成一些复杂的轮播效果。而zebra-swiper不仅可以实现一些3D轮播效果，还可以通过参数来定义你想要的效果。我们正在全面向swiperjs (opens new window)看齐，并且在小程序中，依然可以实现炫酷的轮播效果。");return(e,t)=>{const o=A(b("z-text-ellipsis"),N),u=k("demo-block"),v=_,x=A(b("DemoPage"),C);return n(),d(x,{title:"Ellipsis"},{default:c((()=>[i(v,{class:"demo-text-ellipsis"},{default:c((()=>[i(u,{title:"基础用法"},{default:c((()=>[i(o,{content:s.value,"custom-style":{"font-size":"26rpx"}},null,8,["content"])])),_:1}),i(u,{title:"展开/收起"},{default:c((()=>[i(o,{content:l.value,"custom-style":{"font-size":"26rpx"},"expand-text":"展开","collapse-text":"收起"},null,8,["content"])])),_:1}),i(u,{title:"自定义展示行数"},{default:c((()=>[i(o,{rows:"3",content:a.value,"custom-style":{"font-size":"26rpx"},"expand-text":"展开","collapse-text":"收起"},null,8,["content"])])),_:1}),i(u,{title:"头部省略"},{default:c((()=>[i(o,{rows:"1",content:a.value,"custom-style":{"font-size":"26rpx"},"expand-text":"展开","collapse-text":"收起",position:"start"},null,8,["content"])])),_:1}),i(u,{title:"中部省略"},{default:c((()=>[i(o,{rows:"2",content:a.value,"custom-style":{"font-size":"26rpx"},"expand-text":"展开","collapse-text":"收起",position:"middle"},null,8,["content"])])),_:1}),i(u,{title:"自定义操作内容"},{default:c((()=>[i(o,{content:s.value,"custom-style":{"font-size":"26rpx"}},{action:c((({expanded:e})=>[p(r(e?"收起":"展开"),1)])),_:1},8,["content"])])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-a24c4c10"]]);export{Z as default};
